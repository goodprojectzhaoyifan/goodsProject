<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="renderer" content="webkit"></meta>
    <title>商品列表页</title>
    <link th:href="@{${cdn} + '/css/bootstrap.min.css'}" rel="stylesheet"></link>
    <link th:href="@{${cdn} + '/css/index.css'}" rel="stylesheet"></link>
</head>
<body >
    <div class="container" >
    	<div class="row" >
    		<div class="main_visual">
				<div class="flicking_con">
					<a href="" th:each="image:${fProduct.imageList}">1</a>
				</div>
				<div class="main_image">
					<ul>
						<li th:each="image:${fProduct.imageList}">
							<img class="img-responsive main_image-img" th:src="@{${cdn}+${image.imageUrl}}" />
						</li>
					</ul>
					<a href="javascript:;" id="btn_prev"></a>
					<a href="javascript:;" id="btn_next"></a>
				</div>
			</div>
    	</div>
    	<div class="row product-info" style="padding: 20px 10px;">
    		<p>
    			<span th:inline="text">[[${fProduct.desc}]]</span>
    		</p>
    		<p>
    			<span>价格：</span>
    			<span th:inline="text">[[${fProduct.price}]]</span>
    		</p>
    		<p th:inline="text">[[${fProduct.desc}]]</p>
    	</div>
    </div>    
      
    <div class="go-back" >
    	<span class="glyphicon glyphicon-menu-left"></span>
    </div>  
       
    <div class="container" >
    	<div class="row" >
    		<p class="more-border"></p>
    		<p class="more-product">
    			该代理的其他在售商品
    		</p>
    	</div>
    	<div class="row product-list-div" >
    		<div class="col-xs-6 product-list-item" th:each="list:${ftList}">
				<div class="section-item">
					<a th:href="@{'/front/fproduct/detail/'+${list.id}}+'/'+${id}"><img class="img-responsive" th:src="@{${cdn}+${list.firstImage}}" /></a>
					<p class="section-item-info" th:inline="text">[[${list.pName}]]</p>
					<p class="section-item-info" th:inline="text">[[${list.showKind}]]</p>
			  		<div class="row section-item-price" >
						<div class="col-xs-6 text-right">
			 				<span class="" th:inline="text">￥ [[${list.price}]]元</span>
			 			</div>
					</div>
				</div>
			</div>
		</div>
    </div>       
    <script th:src="@{${cdn} + '/js/jquery.min.js'}" type="text/javascript"></script>
	<script th:src="@{${cdn} + '/js/bootstrap.min.js'}" type="text/javascript"></script>
	<script th:src="@{${cdn} + '/js/jquery.touchSlider.js'}" type="text/javascript"></script>
    <script>
		$(document).ready(function(){
			/*轮播图*/
				$dragBln = false;
				
				$(".main_image").touchSlider({
					flexible : true,
					speed : 200,
					btn_prev : $("#btn_prev"),
					btn_next : $("#btn_next"),
					paging : $(".flicking_con a"),
					counter : function (e){
						$(".flicking_con a").removeClass("on").eq(e.current-1).addClass("on");
					}
				});
				
				$(".main_image").bind("mousedown", function() {
					$dragBln = false;
				});
				
				$(".main_image").bind("dragstart", function() {
					$dragBln = true;
				});
				
				$(".main_image a").click(function(){
					if($dragBln) {
						return false;
					}
				});
				
				timer = setInterval(function(){
					$("#btn_next").click();
				}, 5000);
				
				$(".main_visual").hover(function(){
					clearInterval(timer);
				},function(){
					timer = setInterval(function(){
						$("#btn_next").click();
					},5000);
				});
				
				$(".main_image").bind("touchstart",function(){
					clearInterval(timer);
				}).bind("touchend", function(){
					timer = setInterval(function(){
						$("#btn_next").click();
					}, 5000);
				});
				$("img").load(function(){
					//设置图片大小
					var windowsW = $(window).width();
					$(".recommend").width(windowsW);
					var imgh = $(".main_image-img").height() * 0.9;
					$(".main_image").css("min-height",imgh + 'px');
				});
				
				$(".product-img").click(function(){
						var ii = layer.load();
					    //此处用setTimeout演示ajax的回调
					    setTimeout(function(){
					        layer.close(ii);
					    }, 1000);
				});
				
				//焦点位置
				var pointW = $(".flicking_con").width();
				$(".flicking_con").css("margin-left",-pointW/2 + 'px');
        });
    </script>
</body>
</html>