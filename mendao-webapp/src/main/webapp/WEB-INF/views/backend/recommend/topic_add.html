<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:include="layout/head :: backend"></head>
<script th:inline="javascript">
/*<![CDATA[*/
	function addTopic(actionUrl,checkName,param){
		 var checkValue = getCheckValue(checkName);
		 if(checkValue==""||checkValue=="undefine"||checkValue==null){
		 	alert("请选择要数据!");
		 	return ;
		 }else if(confirm('确定要推荐所选的数据吗?')){
			var targetUrl = /*[[@{'/backend/recommend/addTopic'}]]*/;
		 	targetUrl += (actionUrl.indexOf("?")>0?"&":"?")+checkName+'='+checkValue;
		 	if(param!=null&&param!='undefine'&&param.length>0){
		 		targetUrl= targetUrl+'&'+param;
		 	}
		 	$.get(
	 			targetUrl,
				{ },
				function (data, status) {
					if(data.msg == 1){
						alert("添加成功");
					    parent.location.reload();
					}else{
						alert("添加失败");
					}
			});
		 }
		 return;
	}
/*]]>*/
</script>
<body>
<div class="container-fluid">
     <div class="row-fluid">
		<!-- left -->
		<div class="span3" id="sidebar">
			<div th:include="layout/main-nav :: layered－nav"></div>
		</div>
		<!-- center content -->
		<div id="content" class="span9">
			<div class="row-fluid">
			    <!-- 导航 -->
			</div>
			<div id="page-context" style="margin-top: 5px;">
            <!-- PAGE START -->
                <div class="row-fluid">
					<form action="" >
						<fieldset>
							<legend>查询条件</legend>
							<div class="controls">
                            	<div class="span4">
                            		话题名称: <input class="input-medium" name="q_subject" type="text" th:value="${subject }"/>
                            	</div>
                            </div>
                       		<div class="controls span12" style="text-align: center;">
                           		<button type="submit" class="btn btn-success">查询</button>
                             	<button type="reset" class="btn btn-primary">清空</button>
                          	</div>
                   		</fieldset>
         			</form>
		       		<div class="block">
		           		<div class="navbar navbar-inner block-header">
		           			<div class="muted pull-left">话题列表</div>
		              	</div>
		           		<div class="block-content collapse in">
		                	<div class="span12">
		                    	<div id="example2_wrapper" class="dataTables_wrapper form-inline" role="grid">
                                	<div class="table-toolbar">
		                        		<div class="btn-group pull-right">
		                        			<p>
		                                         <a href="javascript:;" onclick="addTopic('/backend/recommend/addTopic','id');">
		                                         	<button class="btn btn-success" style="margin-right: 3px;">
		                                         		<i class="icon-remove icon-white"></i>添加
	                                         		</button>
                                         		</a>
		                               		</p>
		                                </div>
		                                <br />
		                         	</div>
									<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="example2">
										<thead>
											<tr role="row">
												<th><input type="checkbox" name="id_selector" value="1" onclick="checkAll(this)"/></th>
												<th>话题名称</th>
												<th>发布人</th>
												<th>发布时间</th>
											</tr>
									    </thead>
									    <tbody>
											<tr class="odd gradeX" th:each="topic : ${pageBean.result}">
												<td><input type="checkbox" th:value="${topic.id}" name="id" /></td>
												<td><a th:href="@{'/backend/topic/edit/'+${topic.id}}" th:text="${topic.subject}"></a></td>
												<td th:text="${topic.author.nickName}">*</td>
												<td th:text="${#dates.format(topic.createDate, 'yyyy-MM-dd HH:mm:ss')}">*</td>
											</tr>
										</tbody>
									</table>
									<div class="row">
										<div class="span6">
										<div id="example_info" class="dataTables_info" th:text="${pageBean.totalpage}"></div>
										</div>
										<div class="span6">
											 <div th:include="layout/common/pagination :: pagination"></div>  
										</div> 
									</div>
				          		</div>
				       		</div>
				    	</div>
				   		<!-- /block -->
					</div>
					<!-- PAGE END -->
            	</div>
			</div>
		</div>
	</div>
</div>
</body>
</html>