<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
	<title>活动列表</title>
	<head th:include="layout/head :: front" />
</head>
<script th:inline="javascript">
/*<![CDATA[*/
	$(function(){
		$("#activity_sticker_list li a").click(function(){
			var attr = $(this).attr("alt");
			if(attr != "more"){
				$("#sticker").val(attr);
				$("#search_form").submit();
			}
		});
		$("#show_more").click(function(){
			if($(this).text() == "更多"){
				$("#activity_sticker_list li").show();
				$(this).text("收起");
			}else{
				$("#activity_sticker_list li[name='moreSticker']").hide();
				$(this).text("更多");
			}
		});
		//设置搜索浮层高度
		document.getElementById("biaoqian").style.minHeight =   window.screen.height + 'px';
	});
	function orderList(type){
		$("#order_type").val(type);
		$("#search_form").submit();
	}
	function apperSearch(){
		$('#search-float').addClass("search-t-apper");
	};
	function closeFloat(){
		location.reload();
	}
	function searchBySticker(sticker_id){
		$.post(
				/*[[@{'/front/activity/search'}]]*/,
				{ sticker: sticker_id},
				function (data, status) {
					$("#activity_keywords").val("");
					$("#biaoqian").html(data);
				}
			);
	}
	function searchByKeywords(){
		var activity_keywords = $("#activity_keywords").val();
		$.post(
				/*[[@{'/front/activity/search'}]]*/,
				{ q_name: activity_keywords},
				function (data, status) {
					$("#biaoqian").html(data);
				}
			);
	}
/*]]>*/
</script>
<!-- 同城活动 -->

<body class="index">
	<!--
        	作者：727674928@qq.com
        	时间：2015-09-17
        	描述：顶部菜单和logo
        -->
	<div th:include="layout/common/header::nav-header"></div>
	
	<!-- 活动展示 -->
	<div style="background:#ffffff">
	    <div class="container phs mts">
	    	<div class="row" style="margin: 0px;">
	    		<div class="panel panel-default border0 box-shadow0" style="margin-bottom: 0px;">
	    			<div class="panel-heading" style="border:0px">
	    				<div class="row">
	    					<div class="col-md-10 col-sm-7 col-xs-5">
		    					<p style="margin: 0px;line-height: 38px;">同城活动</p>
		    				</div>	
		    				<div class="col-xs-7 hidden-lg hidden-md hidden-sm" onclick="apperSearch()">
	    						<form class="navbar-form navbar-left" role="" action="" id="search_form" style="margin: 0px;padding: 0;">
									<div class="form-group">
										<input class="form-control" name="q_name" placeholder="搜活动" th:value="${name}" autocomplete="off" style="font-weight: normal;float: right;"></input>
										<input type="hidden" th:value="${sticker}" name="sticker" id="sticker"/>
										<input type="hidden" th:value="${orderType}" name="orderType" id="order_type"/>
										<button class="button fa fa-search" type="button"></button>
									</div>
								</form>
	    					</div>	
	    				</div>
	    			</div>
	    		</div>
	    	</div>
	    </div>
    
	    <div class="container phs" style="margin: 0px auto 0px auto;">
	    	<div class="row" style="margin: 0px;">
	    		<div class="panel panel-default border0 box-shadow0" style="margin-bottom: 0px;">
	    			<div class="panel-body" style="padding-top:0px">
	    				<div class="row">
	    					<div class="col-md-10">
	    						<ul class="inter-label" id="activity_sticker_list">
									<li><a th:style="${#strings.isEmpty(sticker) == true}?'cursor:pointer;background-color: #FF7043;color:#ffffff;':'cursor:pointer;'">全部</a></li>
									<li th:each="stickerL,stickerStat : ${stickerList}" th:if="${stickerStat.index lt 10}">
										<a th:style="${sticker == #strings.toString(stickerL.id)}?'cursor:pointer;background-color: #FF7043;color:#ffffff;':'cursor:pointer;'" th:alt="${stickerL.id }" th:text="${stickerL.display}">话题标签分类</a>
									</li>
									<li style="display:none;" th:each="stickerL,stickerStat : ${stickerList}" th:if="${stickerStat.index >= 10}" name="moreSticker">
										<a th:style="${sticker == #strings.toString(stickerL.id)}?'cursor:pointer;background-color: #FF7043;color:#ffffff;':'cursor:pointer;'" th:alt="${stickerL.id }" th:text="${stickerL.display}">话题标签分类</a>
									</li>
									<li th:if="${#lists.size(stickerList) > 9}">
										<a id="show_more" alt="more" href="javascript:;" style="cursor:pointer;">更多</a>
									</li>
								</ul>
	    					</div>
	    				</div>
	    			</div>
	    		</div>
	    	</div>
	    </div>
    
    </div>
    
    <div style="background:#ffffff">
		<div class="container phs">
			<div class="row mh0" style="height: 2px;background: #efefef;"></div>
			<div class="row" style="margin: 0px;">
    			<div class="panel panel-default panel-col border0 box-shadow0" style="padding:0px;">
    				<div class="panel-body" style="padding-left:0px;padding-right:0px">
    					<div class="row" style="padding-bottom:10px;margin:0px;background: #ffffff;">
				    		<div class="col-md-1 col-sm-2 col-xs-3 text-center">
				    			<a href="javascript:;" th:class="${orderType == '1'}?'active':''" onclick="orderList(1)"><h4>最新</h4></a>
				    		</div>
				    		<div class="col-md-1 col-sm-2 col-xs-3 text-center">
				    			<a href="javascript:;" th:class="${orderType == '2'}?'active':''" onclick="orderList(2)"><h4>最热</h4></a>
				    		</div>
				    		<div class="col-md-1 col-sm-2 col-xs-3 text-center">
				    			<a href="javascript:;" th:class="${orderType == '3'}?'active':''" onclick="orderList(3)"><h4>最近</h4></a>
				    		</div>
				    	</div>
		    			<section class="md-section" style="padding: 0px;">
							<div class="course container" id="recommend-course-block" style="padding-left:0px;padding-right:0px">
								<div class="section-body index-course" style="padding-top: 0px;">
									<div class="tabs">
										<div id="c-recommend" class="item act clearfix">
											<div class="col-md-4 col-sm-12 act-ph0 " style="margin-top: 0px;margin-bottom:30px" th:each="activity : ${pageBean.result}">
												<div class="course-item" th:onclick="'window.location.href=\''+@{'/front/activity/detail/'+${activity.id}}+'\''">
													<div class="course-img">
														<a th:href="@{'/front/activity/detail/' + ${activity.id } }">
							    							<img th:alt="${activity.name}" th:if="${activity.activityImage}" th:src="@{${cdn}+${activity.activityImage}}" class="img-responsive center-block" ></img>
							    							<img th:alt="${activity.name}" th:if="${#strings.isEmpty(activity.activityImage)}" th:src="@{'/images/home/u901.jpg'}" class="img-responsive center-block" ></img>
						    							</a>
													</div>
													<div class="course-info">
						    							<div class="title">
						    								<a th:href="@{'/front/activity/detail/' + ${activity.id } }" ><span class="text-xlg" th:text="${activity.name}">门道教育研究研</span></a>
						    							</div>
						    							<div class="metas" th:if="${activity.type == 0}">
															时间：<span th:text="${#dates.format(activity.startTime, 'yyyy-MM-dd HH:mm')}+'~'+${#dates.format(activity.endTime, 'HH:mm')}">2015-12-15</span>
														</div>
														<div class="metas" th:if="${activity.type == 1}">
															时间：<span th:text="${#dates.format(activity.startTime, 'yyyy-MM-dd HH:mm')}+'~'+${#dates.format(activity.endTime, 'yyyy-MM-dd HH:mm')}">2015-12-15 08:00</span>
														</div>
														<div class="metas" style="text-align: center;">
															<span th:text="'已有'+${activity.joinNumber}+'人完成报名'"></span>
														</div>
						    						</div>
												</div>
											</div>
										</div>				
									</div>
								</div>
							</div>
						</section>
		    			<div class="panel-body" th:if="${#lists.size(pageBean.result) == 0}">
							暂无内容
						</div>
						<div class="row hidden-xs">
							<div class="span6">
								 <div th:include="layout/common/pagination :: pagination"></div>  
							</div> 
						</div>
						<div class="panel-footer text-center hidden-lg hidden-md hidden-sm bg-color border0">
							<p><a>查看更多</a></p>
						</div>
		    		</div>
		    	</div>
			</div>
		</div>
	</div>
		
	<!-- footer -->
	<div th:include="layout/front_nav::nav-footer"></div>	
	<!-- 搜索浮层 -->
	<div id="search-float" class="search-t">
    	<div class="search-top">
    		<div class="pull-left mt8">
    			<a><i onclick="closeFloat()" class="fa fa-chevron-circle-left text-font30"></i></a>
    		</div>
    		<div class="border-style" style="float: left;height: 40px;width: 80%;">
    			<input class="search-input" id="activity_keywords" type="text" style="border: 0px;box-shadow: 0px 0px 0px 0px;" placeholder="请输入关键字"></input>
    		</div>
    		<div class="pull-right mrm">
    			<a><i class="fa fa-search font-color mtm text-24" onclick="searchByKeywords()"></i></a>
    		</div>
    	</div>
    	<div id="biaoqian" class="search-bottom" >
    		<div class="container">
    			<div class="row mvl text-center">
    				<p class="mar font-color text-xlg">热门<span>活动</span>标签</p>
    			</div>
    			<div class="row">
    				<ul class="inter-label phm text-center">
						<li th:each="sticker : ${stickerList}">
							<a href="javascript:;" th:onclick="'searchBySticker('+${sticker.id}+')'" th:text="${sticker.display}">数学</a>
						</li>
					</ul>
    			</div>
    		</div>
    	</div>
    </div>
</body>
</html>