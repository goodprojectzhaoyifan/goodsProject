<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>后台管理 - 登录</title>
    <link th:href="@{${cdn} + '/css/bootstrap.min.css'}" rel="stylesheet"></link>
    <link th:href="@{${cdn} + '/css/font-awesome.min.css'}" rel="stylesheet"></link>
    <link th:href="@{${cdn} + '/css/plugins/iCheck/custom.css'}" rel="stylesheet"></link>
    <link th:href="@{${cdn} + '/css/animate.min.css'}" rel="stylesheet"></link>
    <link th:href="@{${cdn} + '/css/style.css'}" rel="stylesheet"></link>
    <script>
    	
    </script>
</head>
<body class="gray-bg">
    <div class="wrapper wrapper-content">
        <div class="row">
            <div class="ibox float-e-margins ph10" >
                <div class="ibox-title">
                    <h5>
                    	邀请链接
                    </h5>
                </div>
                <div class="ibox-content">
                    <div class="row mb20" >
                		<form>
                    		<input id="invite_url" class="col-sm-4 col-xs-12" type="text" th:value="${registerLink}" />
                    	</form>
                    </div>
                    <div class="row">
                    	<button class="btn btn-sm btn-primary" onclick="createUrl()" >生成分销注册链接</button>
						<button id="copy-button" class="btn btn-sm btn-primary" >复制</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script th:src="@{${cdn} + '/js/jquery.min.js'}" type="text/javascript"></script>
    <script th:src="@{${cdn} + '/js/bootstrap.min.js'}" type="text/javascript"></script>
    <script th:src="@{${cdn} + '/js/plugins/layer/layer.min.js'}" type="text/javascript"></script>
    <script th:src="@{${cdn} + '/js/content.min.js'}" type="text/javascript"></script>
    <script th:src="@{${cdn} + '/js/welcome.min.js'}" type="text/javascript"></script>
    <script th:src="@{${cdn} + '/js/plugins/iCheck/icheck.min.js'}" type="text/javascript"></script>
    <script th:inline="javascript">
    	function createUrl(){
    		var url = $("#invite_url").val();
    		if(url == ""){
    			$.post(
       					/*[[@{'/back/register/create'}]]*/,
       					{ },
       					function (data, status) {
       						if(data.status == 1){
       							layer.alert(data.msg ,{icon: 1}, function(index){
       								  	layer.close(index);
            							$("#invite_url").val(data.url);
       								});
       						}else{
       							layer.alert(data.msg ,{icon: 2}, function(index){
    								  	layer.close(index);
    								});
       						}
       					}
       				);
    		}else{
    			layer.alert('邀请链接已经生成',{icon: 1}, function(index){
					  	layer.close(index);
					});
    		}
    	}
    </script>
</body>
</html>